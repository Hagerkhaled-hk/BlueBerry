import{r as s,j as e,C as M,P as D,L,a as T}from"./index-BPVw2uDO.js";import{T as z}from"./index-BPrJrvot.js";import{M as A,u as k,P as F,t as B,w as W,L as H,q as S,o as O}from"./use-animation-DaosmTOG.js";class q extends s.Component{getSnapshotBeforeUpdate(u){const n=this.props.childRef.current;if(n&&u.isPresent&&!this.props.isPresent){const a=n.offsetParent,p=a instanceof HTMLElement&&a.offsetWidth||0,r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft,r.right=p-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function G({children:l,isPresent:u,anchorX:n}){const a=s.useId(),p=s.useRef(null),r=s.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:x}=s.useContext(A);return s.useInsertionEffect(()=>{const{width:g,height:d,top:y,left:t,right:o}=r.current;if(u||!p.current||!g||!d)return;const i=n==="left"?`left: ${t}`:`right: ${o}`;p.current.dataset.motionPopId=a;const c=document.createElement("style");return x&&(c.nonce=x),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${d}px !important;
            ${i}px !important;
            top: ${y}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[u]),e.jsx(q,{isPresent:u,childRef:p,sizeRef:r,children:s.cloneElement(l,{ref:p})})}const K=({children:l,initial:u,isPresent:n,onExitComplete:a,custom:p,presenceAffectsLayout:r,mode:x,anchorX:g})=>{const d=k(U),y=s.useId();let t=!0,o=s.useMemo(()=>(t=!1,{id:y,initial:u,isPresent:n,custom:p,onExitComplete:i=>{d.set(i,!0);for(const c of d.values())if(!c)return;a&&a()},register:i=>(d.set(i,!1),()=>d.delete(i))}),[n,d,a]);return r&&t&&(o={...o}),s.useMemo(()=>{d.forEach((i,c)=>d.set(c,!1))},[n]),s.useEffect(()=>{!n&&!d.size&&a&&a()},[n]),x==="popLayout"&&(l=e.jsx(G,{isPresent:n,anchorX:g,children:l})),e.jsx(F.Provider,{value:o,children:l})};function U(){return new Map}const v=l=>l.key||"";function $(l){const u=[];return s.Children.forEach(l,n=>{s.isValidElement(n)&&u.push(n)}),u}const J=({children:l,custom:u,initial:n=!0,onExitComplete:a,presenceAffectsLayout:p=!0,mode:r="sync",propagate:x=!1,anchorX:g="left"})=>{const[d,y]=B(x),t=s.useMemo(()=>$(l),[l]),o=x&&!d?[]:t.map(v),i=s.useRef(!0),c=s.useRef(t),f=k(()=>new Map),[R,_]=s.useState(t),[C,N]=s.useState(t);W(()=>{i.current=!1,c.current=t;for(let j=0;j<C.length;j++){const h=v(C[j]);o.includes(h)?f.delete(h):f.get(h)!==!0&&f.set(h,!1)}},[C,o.length,o.join("-")]);const b=[];if(t!==R){let j=[...t];for(let h=0;h<C.length;h++){const m=C[h],P=v(m);o.includes(P)||(j.splice(h,0,m),b.push(m))}return r==="wait"&&b.length&&(j=b),N($(j)),_(t),null}const{forceRender:w}=s.useContext(H);return e.jsx(e.Fragment,{children:C.map(j=>{const h=v(j),m=x&&!d?!1:t===C||o.includes(h),P=()=>{if(f.has(h))f.set(h,!0);else return;let E=!0;f.forEach(I=>{I||(E=!1)}),E&&(w==null||w(),N(c.current),x&&(y==null||y()),a&&a())};return e.jsx(K,{isPresent:m,initial:!i.current||n?void 0:!1,custom:u,presenceAffectsLayout:p,mode:r,onExitComplete:m?void 0:P,anchorX:g,children:j},h)})})},Q="/BlueBerry/assets/empty_cart-BZASCGv_.png";function Y(){const[l,u]=s.useState(!1),{cart:n,HandleAmount:a,DeleteItem:p}=s.useContext(M),[r,x]=s.useState([]),{api_Json_ProductsSaving:g}=s.useContext(D),d=async()=>{const t=await Promise.all(n.map(async o=>{let i=g.find(c=>c.title==Object.keys(o)[0]);if(!i){let c=Object.keys(o)[0];const{data:f}=await T.get(`https://dummyjson.com/products/search?q=${c}`);i=f.products[0]}return{...i,amount:Object.values(o)[0]}}));x(t)};S(),S();const y=()=>{u(!l)};return s.useEffect(()=>{d()},[n,g]),e.jsx("div",{className:`Cartcarbon ${r.length==0?"emptyImage":""}`,children:e.jsxs("div",{className:`container-fluid Container ${r.length==0?"empty":""}`,children:[e.jsx("div",{className:"left",children:e.jsxs("div",{className:"top",children:[e.jsx("p",{children:"Sub-totall: $500"}),e.jsx("p",{children:"Discount: 3% "}),e.jsx("p",{children:"Delivery Charges :$10"}),e.jsxs("div",{className:"coupon",children:[e.jsxs("div",{className:"coupon_text",children:[e.jsx("p",{children:"Discount coupon"}),e.jsx("button",{className:"btn text-danger",onClick:()=>y(),children:"Click"})]}),e.jsx(J,{children:l&&e.jsx(O.div,{initial:{height:0,opacity:0},animate:{height:"50px",opacity:1,transitionEnd:{height:"50px"}},exit:{height:0,transition:{height:{duration:.3},opacity:{duration:.2}}},transition:{type:"tween",ease:"easeIn"},style:{overflow:"hidden"},className:"input_background",children:e.jsxs("div",{class:"input-group mb-3",children:[e.jsx("input",{type:"text",class:"form-control",placeholder:"Enter your coupon","aria-label":"Recipientâ€™s username","aria-describedby":"button-addon2"}),e.jsx("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon2",children:"Apply"})]})})})]}),e.jsx("hr",{style:{margin:"0",marginTop:"10px"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},className:"totall",children:[e.jsx("p",{children:" Totall"}),e.jsxs("p",{children:["$",r.reduce((t,o)=>t+o.price*o.amount,0)]})]})]})}),r.length==0?e.jsx("div",{className:"emptyImage",children:e.jsxs(L,{to:"/Products",style:{textDecoration:"none",color:"var(--main_color)",fontWeight:"bold",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("div",{className:"image ",style:{width:"60%",objectFit:"cover",overflow:"none"},children:e.jsx("img",{style:{width:"100%"},src:Q,alt:""})}),e.jsx("p",{children:"ðŸ›’ Start shopping now "})," "]})}):e.jsx("div",{className:"right",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:" Product"}),e.jsx("th",{scope:"col",children:"Price"}),e.jsx("th",{scope:"col",children:"Quantity"}),e.jsx("th",{scope:"col",children:"Totall"}),e.jsx("th",{scope:"col"})]})}),e.jsx("tbody",{children:r.map((t,o)=>{var i;return e.jsxs("tr",{children:[e.jsxs("th",{scope:"row",className:"image_title",children:[e.jsx("div",{className:"image",children:e.jsx("img",{src:(t==null?void 0:t.img)??(t==null?void 0:t.thumbnail),alt:""})}),e.jsx("p",{className:"title",children:(i=t==null?void 0:t.title)==null?void 0:i.split(" ").splice(0,2).join(" ")})]}),e.jsxs("td",{className:" ",children:["$",t==null?void 0:t.price]}),e.jsx("td",{children:e.jsx("select",{className:"form-select ",style:{width:"50px",padding:"2px 5px"},value:t==null?void 0:t.amount,onChange:c=>a(c.target,t.title),children:[...Array((t==null?void 0:t.count)??(t==null?void 0:t.stock))].map((c,f)=>e.jsx("option",{value:f+1,children:f+1},f))})}),e.jsx("td",{children:((t==null?void 0:t.price)*(t==null?void 0:t.amount)).toFixed(2)}),e.jsx("td",{children:e.jsx(z,{className:"trash",style:{fontSize:"16px",cursor:"pointer"},onClick:()=>{p(t.title)}})})]},o)})})]})})]})})}export{Y as C};
